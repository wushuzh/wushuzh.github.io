<!DOCTYPE html>
<html lang="zh-cn">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Java 开发环境</title>
<meta name="description" content="个人技术站点">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="https://wushuzh.github.io/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://wushuzh.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="https://wushuzh.github.io/css/owl.carousel.css">
<link rel="stylesheet" href="https://wushuzh.github.io/css/owl.theme.css">


  <link href="https://wushuzh.github.io/css/style.sea.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://wushuzh.github.io/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://wushuzh.github.io/img/favicon.png">


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-102509506-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="/">小强会武术</a></h1>
    
      <p class="sidebar-p">工程师</p>
    
      <p class="sidebar-p">记录每一个自己填平的坑</p>
    
    <ul class="sidebar-menu">
      
      
        <li><a href="https://wushuzh.github.io/">Home</a></li>
      
    </ul>
    <p class="social">
  
  
  
  <a href="https://twitter.com/Xiao_Qiang" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:wushuzh@outlook.com" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  
  

  
  <a href="https://wushuzh.github.io/index.xml" data-animate-hover="pulse">
    <i class='fa fa-rss'></i>
  </a>
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2017 wushuzh
        
        | Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="/">小强会武术</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">

      <div class="row">
        <div class="col-sm-6">
          
            <div class="image">
              <img src="https://wushuzh.github.io//img/blog/setup-java-dev-env/dev.png" class="img-responsive" alt="">
            </div>
          
        </div>
        <div class="col-md-6">
            <h2>Java 开发环境</h2>
                <p>
                  小强会武术
                </p>

                <time datetime="2017-11-24 11:37:35 &#43;0800 CST">
                <i class="fa fa-calendar-o fa-fw"></i> 2017-11-24
                </time>
                &middot;
                1001 字
                &middot;
                2 分钟

        </div>
      </div>
      <br />

         <p>设定 JDK 和 Eclipse 集成开发环境
</p>

<h3 id="jdk-和-ide">JDK 和 IDE</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ sudo pacman -S jdk8-openjdk
$ source /etc/profile
# put this into ~/.bashrc and source
$ export JAVA_HOME=/usr/lib/jvm/default
$ archlinux-java status
Available Java environments:
  java-8-openjdk (default)

$ pacman -S eclipse-java
$ cower -u intellij-idea-ce

$ sudo pacman -S gradle</code></pre></div>

<p>Eclipse 安装后的配置建议:</p>

<ul>
<li>在系统使用暗色背景时如果显示诡异，需要手动按照 Windows &gt; Preferences &gt; General &gt; Appearance 明确选择 Dark 主题。另外最好修改 /usr/lib/eclipse/eclipse.ini 将 GTK+ 3 禁止。</li>
<li>项目在包管理器中的顺序可通过右键项目，Build Path &gt; Conf Build Path，在对话框 Order and Export 中明确顺序。</li>
<li>如果项目涉及前端，需要编辑 HTML、CSS、JSON 和 Javascript 文件，建议通过 Help &gt; Install New Software 选择 Eclipse Web Developer Tools。否则默认双击相关文件 Eclipse 会试图将工作代理给系统相关编辑器。</li>
</ul>

<p>IntelliJ 启动初始化设置，安装常用插件，新建或导入 maven/gradle 项目。设定项目的 SDK 为 /usr/lib/jvm/default-runtime 即可。因为社区版对于 Spring 项目默认不支持，所以你可能会花费大量时间在网上查找相关绕路的奇技淫巧，其实也挺不值的。</p>

<ul>
<li><a href="http://plugins.jetbrains.com/plugin/164">IdeaVim</a></li>
</ul>

<h3 id="ca">CA</h3>

<p>有时候开发需要向本地/内网的私有仓库下载或是提交软件模块，这就需要在开发环境中导入内部自签名的证书。考虑到各种软件和不同操作系统为支持私有证书各不相同的导入配置操作、证书维护和未来的培训成本，这可能是一件得不偿失的事情。</p>

<p>但工程师的主要任务是尽快搭建其开发环境，比如 Archlinux 使用 ca-certificates 将自有 crt 格式证书放在指定目录，运行指令即可。</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ keytool -list -keystore ${JAVA_HOME}/jre/lib/security/cacerts
...
Your keystore contains 140 entries
...
$ sudo mv any.crt /etc/ca-certificates/trust-source/anchors/
$ sudo trust extract-compat
$ keytool -list -keystore ${JAVA_HOME}/jre/lib/security/cacerts
...
Your keystore contains 143 entries
...</code></pre></div>

<p>针对用户申请材料，CA 为其制作证书。同时它也会广而告之“证书失效列表” (CRL)。证书</p>

<h3 id="tomcat">Tomcat</h3>

<p>安装并配置 tomcat 运行管理权限，之后才能通过脚本/IDE 管理其容器内的各个应用。</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ sudo pacman -S tomcat8
$ sudo vi /etc/tomcat8/tomcat-users.xml
# uncomment and modify role and user section

$ sudo gpasswd -a wushuzh tomcat8</code></pre></div>

<blockquote>
<p>将当前用户加入 tomcat8 用户组，以便可以读取配置文件。要重新启动 IDE 登录让新用户组生效</p>
</blockquote>

<p>下面的设定开放了如下角色: 运行 tomcat 脚本管理 manager-script，建立两个用户，并设定好他们的密码。</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;role</span> <span style="color:#a6e22e">rolename=</span><span style="color:#e6db74">&#34;tomcat&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;role</span> <span style="color:#a6e22e">rolename=</span><span style="color:#e6db74">&#34;manager-script&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;user</span> <span style="color:#a6e22e">username=</span><span style="color:#e6db74">&#34;tomcat&#34;</span> <span style="color:#a6e22e">password=</span><span style="color:#e6db74">&#34;[CHANGE_ME]&#34;</span> <span style="color:#a6e22e">roles=</span><span style="color:#e6db74">&#34;tomcat&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;user</span> <span style="color:#a6e22e">username=</span><span style="color:#e6db74">&#34;manager&#34;</span> <span style="color:#a6e22e">password=</span><span style="color:#e6db74">&#34;[CHANGE_ME]&#34;</span> <span style="color:#a6e22e">roles=</span><span style="color:#e6db74">&#34;tomcat,manager-script&#34;</span><span style="color:#f92672">/&gt;</span></code></pre></div>

<p>配置完毕，尝试首次启动 tomcat8 服务，并使用浏览器查看 localhost:8080 ，应该看到的是花花绿绿的恭喜信息。</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ systemctl status tomcat8
$ sudo systemctl start tomcat8
# check with chrome with localhost:8080
$ sudo systemctl stop tomcat8</code></pre></div>

<p>测试用 manager 用户通过 curl 上传部署一个应用
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ curl -T sampleapp.war \
    &#34;http://manager:change_me@localhost:8080/manager/text/deploy?path=/sampleapp&amp;update=true&#34;
OK - Deployed application at context path /sampleapp</code></pre></div></p>

<p>查看 catalina.sh 的运行选项支持 Java Platform Debugger Architecture (JPDA)，在 Intellij 中配置</p>

<p>TODO: 查看 Intellij 的两个 tomcat 插件</p>

<h3 id="docker">Docker</h3>

<p>Debug
<a href="https://spring.io/guides/gs/spring-boot-docker/">Spring Boot with Docker</a>
Hot Reload
<a href="https://medium.com/@lhartikk/development-environment-in-spring-boot-with-docker-734ad6c50b34">Development environment in Spring Boot with Docker</a>
<a href="https://github.com/ntsim/hot-spring-docker">Hot Reload Spring Boot in Docker</a></p>

<p><a href="http://www.baeldung.com/spring-boot-minikube">Running Spring Boot Applications With Minikube</a></p>

<h2 id="windows-10">Windows 10</h2>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">choco install eclipse</code></pre></div>

<p>参考文档</p>

<blockquote>
<ul>
<li>Archlinux wiki

<ul>
<li><a href="https://wiki.archlinux.org/index.php/OpenSSL">OpenSSL</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Tomcat">Tomcat</a></li>
</ul></li>
<li>Jan Steffens (2014-12-11) <a href="https://www.archlinux.org/news/ca-certificates-update/">ca-certificates update</a></li>
<li>Apache Tomcat 8 <a href="http://tomcat.apache.org/tomcat-8.0-doc/manager-howto.html#Configuring_Manager_Application_Access">Manager App HOW-TO</a></li>
<li>Olaf Kock (2015-05-01) <a href="https://stackoverflow.com/a/29992541/4393386">Whats the difference between service tomcat start/stop and ./catalina.sh run/stop</a></li>
<li>markiewb (2017-04-06) <a href="https://benkiew.wordpress.com/2017/06/04/idea-build-your-own-tomcat-integration-for-the-free-intellij-idea-community-edition/">IDEA: Build your own Tomcat integration for the free IntelliJ IDEA Community Edition</a></li>
<li><a href="https://www.jetbrains.com/help/idea/2017.2/deploying-a-web-app-into-an-app-server-container.html">Deploying a web app into an app server container</a></li>
<li>Holly Cummins (2017-10-11) <a href="http://garage.mybluemix.net/posts/webpackwatchliberty/">Using webpack watch with the Gradle and the Liberty Application Server</a></li>
<li>Justin Calleja (2016-04-17) <a href="http://justincalleja.com/2016/04/17/serving-a-webpack-bundle-in-spring-boot/">Serving a Webpack bundle in Spring Boot</a></li>
<li>John Doe (2015-09-29) <a href="https://www.michael-bull.com/blog/2015/09/29/deployment-ready-websites-with-spring-boot">Deployment ready websites with Spring Boot</a></li>
<li>Bharat Tiwari <a href="https://medium.com/a-beginners-guide-for-webpack-2">A beginner’s guide to Webpack 2</a></li>
</ul>
</blockquote>

<p>封面图片来自 <a href="https://dribbble.com/shots/3530278-Java-Developer-Joke">Java Developer Joke</a> <a href="https://dribbble.com/browserling"><i class="fa fa-dribbble" aria-hidden="true"></i> Browserling</a></p>
         <div id="disqus_thread">
  <a href="#" onclick="disqus();return false;">enable VPN and click here to <i class="fa fa-comments" aria-hidden="true"></i></a>
</div>

<script type="text/javascript">
var disqus_loaded = false;
function disqus() {
  if (!disqus_loaded) {
    
    
    
    

    disqus_loaded = true;
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'wushuzh';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }
};
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
    </div>
  </div>
</div>
<noscript>
  <style>.jsonly { display: none }</style>
</noscript>

          </div>
      </div>
  </div>
  <script src="https://wushuzh.github.io/js/jquery.min.js"></script>
<script src="https://wushuzh.github.io/js/bootstrap.min.js"></script>
<script src="https://wushuzh.github.io/js/jquery.cookie.js"> </script>
<script src="https://wushuzh.github.io/js/ekko-lightbox.js"></script>
<script src="https://wushuzh.github.io/js/jquery.scrollTo.min.js"></script>
<script src="https://wushuzh.github.io/js/masonry.pkgd.min.js"></script>
<script src="https://wushuzh.github.io/js/imagesloaded.pkgd.min.js"></script>
<script src="https://wushuzh.github.io/js/owl.carousel.min.js"></script>
<script src="https://wushuzh.github.io/js/front.js"></script>

<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</body>
</html>
