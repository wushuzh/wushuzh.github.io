<!DOCTYPE html>
<html lang="zh-cn">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>测试驱动开发</title>
<meta name="description" content="个人技术站点">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="https://wushuzh.github.io/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://wushuzh.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="https://wushuzh.github.io/css/owl.carousel.css">
<link rel="stylesheet" href="https://wushuzh.github.io/css/owl.theme.css">


  <link href="https://wushuzh.github.io/css/style.sea.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://wushuzh.github.io/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://wushuzh.github.io/img/favicon.png">


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-102509506-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="/">小强会武术</a></h1>
    
      <p class="sidebar-p">工程师</p>
    
      <p class="sidebar-p">记录每一个自己填平的坑</p>
    
    <ul class="sidebar-menu">
      
      
        <li><a href="https://wushuzh.github.io/">Home</a></li>
      
    </ul>
    <p class="social">
  
  
  
  <a href="https://twitter.com/Xiao_Qiang" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:wushuzh@outlook.com" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  
  

  
  <a href="https://wushuzh.github.io/index.xml" data-animate-hover="pulse">
    <i class='fa fa-rss'></i>
  </a>
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2017 wushuzh
        
        | Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="/">小强会武术</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">

      <div class="row">
        <div class="col-sm-6">
          
            <div class="image">
              <img src="https://wushuzh.github.io//img/blog/head-first-cucumber/cucumber.gif" class="img-responsive" alt="">
            </div>
          
        </div>
        <div class="col-md-6">
            <h2>测试驱动开发</h2>
                <p>
                  小强会武术
                </p>

                <time datetime="2018-07-01 22:13:07 &#43;0800 CST">
                <i class="fa fa-calendar-o fa-fw"></i> 2018-07-01
                </time>
                &middot;
                965 字
                &middot;
                2 分钟

        </div>
      </div>
      <br />

         <p>使用<a href="https://en.wikipedia.org/wiki/Domain-specific_language">业务术语</a>定义测试产品行为
</p>

<p>最近看到了阮一峰老师转发了一篇亚马逊 CTO Werner Vogels 2006 的文章 <a href="https://www.allthingsdistributed.com/2006/11/working_backwards.html">Working Backwards</a>, 提到亚马逊为了对用户的需求保持专注，其服务开发团队会采用一种“倒推”式的工作模式，可分为四步：</p>

<ol>
<li>先写新闻稿——用最简要的日常语言描述产品特性，外部世界该如何评价这个产品;</li>
<li>再写常见问题(FAQ)文档——设想用户看到新闻稿或使用产品时提出的问题，做成一个问题列表作为新闻稿的补充，从用户视角思考这些问题答案；</li>
<li>定义用户体验——尽可能详尽地描述用户地各种不同使用场景，要有模拟界面，要有代码片段;</li>
<li>写用户手册——用户在使用时需要知道的一切，主要包含 <strong>概念</strong> 、<strong>如何做</strong>、<strong>参考</strong> 三部分，多类用户意味着多个手册；</li>
</ol>

<p>经过这样一个步骤，文档在动手前就可用了，并且整个团队都对开发的产品有了相同的共识。</p>

<p>正好最近正在学习 <a href="https://en.wikipedia.org/wiki/Cucumber_(software)">Cucumber</a> 其代表的<a href="https://en.wikipedia.org/wiki/Behavior-driven_development">BDD</a> 方法，和亚马逊的流程有些相似: 即防止仅从技术角度设计开发产品，强制团队紧紧围绕着业务逻辑开展工作。</p>

<p>Cucumber 本质是一个测试框架，它推荐使用者采用 BDD 的开发模式。即鼓励业务或架构人员和开发、测试三方在初始阶段多做简单高效的沟通，并输出一个用于描述系统功能的文档(.feature)，主要特点是</p>

<ul>
<li>结合 Gherkin language 关键字 (feature, scenario) 用平实语言定义描述系统行为</li>
<li>按“准备条件——触发操作——检验行为”(Given, When, Then)的格式围绕一个特性做不同场景下的预期行为描述，每句描述都叫做Step</li>
<li>支持对测试场景的标签标记，比如按 JIRAID 标记，或按 <a href="https://www.guru99.com/smoke-sanity-testing.html">Sanity 或 Smoke</a> 不同类别标记</li>
<li>支持对某个测试场景的大纲化，以及对不同参数化代入后的反复执行</li>
</ul>


<figure>
    
        <img src="/img/blog/head-first-cucumber/feature.png" />
    
    
    <figcaption>
        <h4>Feature file</h4>
        
    </figcaption>
    
</figure>


<p>之后的开发会围绕着上述 feature 文件(也可以理解为传统的 test suite) 进行开发，Junit 的 Test Runner 可以用来调用 cucumber , 第一次 cucumber 能产生和之前 Gherkin Step 对应的空方法，这部分叫做 StepDefinition 。这一对应的过程叫做 glue ，即将业务术语和编程语言做粘合和链接:</p>

<ul>
<li>用各种库做预置条件的模拟和断言检测</li>
<li>实现 Hooks 以完成测试前的准备和测试后的清理</li>
<li>可以用不同包、类将不同类别的 StepDefinition 分别组织管理</li>
</ul>


<figure>
    
        <img src="/img/blog/head-first-cucumber/stepDefinition.png" />
    
    
    <figcaption>
        <h4>Step Definition class</h4>
        
    </figcaption>
    
</figure>


<p>更加细节的信息可以查看<a href="https://docs.cucumber.io/installation/">官方文档</a> 以及 Tutorialpoint <a href="https://www.tutorialspoint.com/cucumber/index.htm">Cucumber tutorial</a> 内容挺全，但文档格式尤其是显示 feature 文件的排版时经常错误。</p>

<p>后续我会继续学习一下 cucumber 和其他测试库(<a href="https://en.wikipedia.org/wiki/Selenium_(software)">Selenium</a>、<a href="http://rest-assured.io/">Rest Assured</a>）和其他框架 <a href="https://thepracticaldeveloper.com/2018/03/31/cucumber-tests-spring-boot-dependency-injection/">Spring</a> 结合使用的相关技巧。</p>

<p><img alt="End Picture" src="/img/blog/head-first-cucumber/cucumber_gherkin.jpg" class="img-responsive"></p>

<p><a href="https://dribbble.com/shots/3560566-Made-in-Manhattan-eaten-in-London">Made in Manhattan</a>
 <a href="https://dribbble.com/andrew-nye"><i class="fa fa-dribbble" aria-hidden="true"></i> Andrew Nye</a></p>

<p>参考文档</p>

<ul>
<li>Harsh Murari (2018-03-16) <a href="https://medium.com/@hmurari/bdd-cucumber-and-selenium-webdriver-based-test-automation-framework-in-python-ae092a7581d3">BDD, Cucumber and Selenium WebDriver based Test Automation Framework in Python</a></li>
<li>Udemy Rahul Shetty (2018-03) <a href="https://www.udemy.com/share/100h30/">Cucumber with Java-Build Automation Framework in lesser code</a></li>
<li>Udemy Karthik KK (2016-12) <a href="https://www.udemy.com/share/1001OE/">Cucumber with Selenium Java (Basic)</a></li>
<li>Angie Jones (2016-08-24) <a href="http://angiejones.tech/rest-assured-with-cucumber-using-bdd-for-web-services-automation/">Rest-Assured with Cucumber: Using BDD for Web Services Automation</a></li>
<li>GURU99 <a href="https://www.guru99.com/using-cucumber-selenium.html">Using Cucumber with Selenuim</a></li>
</ul>

<p>封面图片来自 <a href="https://dribbble.com/shots/2222787-Summer-cucumber">Summer-cucumber</a> <a href="https://dribbble.com/xmushroomx"><i class="fa fa-dribbble" aria-hidden="true"></i> xMx</a></p>
         <div id="disqus_thread">
  <a href="#" onclick="disqus();return false;">enable VPN and click here to <i class="fa fa-comments" aria-hidden="true"></i></a>
</div>

<script type="text/javascript">
var disqus_loaded = false;
function disqus() {
  if (!disqus_loaded) {
    
    
    
    

    disqus_loaded = true;
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'wushuzh';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }
};
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
    </div>
  </div>
</div>
<noscript>
  <style>.jsonly { display: none }</style>
</noscript>

          </div>
      </div>
  </div>
  <script src="https://wushuzh.github.io/js/jquery.min.js"></script>
<script src="https://wushuzh.github.io/js/bootstrap.min.js"></script>
<script src="https://wushuzh.github.io/js/jquery.cookie.js"> </script>
<script src="https://wushuzh.github.io/js/ekko-lightbox.js"></script>
<script src="https://wushuzh.github.io/js/jquery.scrollTo.min.js"></script>
<script src="https://wushuzh.github.io/js/masonry.pkgd.min.js"></script>
<script src="https://wushuzh.github.io/js/imagesloaded.pkgd.min.js"></script>
<script src="https://wushuzh.github.io/js/owl.carousel.min.js"></script>
<script src="https://wushuzh.github.io/js/front.js"></script>

<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</body>
</html>
